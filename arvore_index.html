<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>√Årvore Geneal√≥gica</title>
    <link rel="stylesheet" href="arvore_style.css">
</head>
<body>
   <div id="loadingMessage" style="display:none; position:fixed; top:0; left:0; width:100%; background:#fff3cd; color:#664d03; font-weight:bold; text-align:center; padding:1em; z-index:1000; border-bottom: 1px solid #ffc107;">Carregando...</div>
    <div class="container">
        <header>
            <h1>üå≥ √Årvore Geneal√≥gica</h1>
            <p>Um aplicativo para construir e gerenciar sua hist√≥ria familiar.</p>
        </header>
        <nav>
            <button id="btnRefugio" style="display: none;">üè† In√≠cio</button>
        </nav>
        
        <section id="secAbertura">
   <!--         <h2>Bem-vindo √† sua Hist√≥ria Familiar!</h2>   -->
            <button id="btnGerenciarHub" class="hub-button">üîç Lista/Pessoas</button>
            <button id="btnNovaPessoaHub" class="hub-button">‚ûï Incluir Nova Pessoa</button>
        </section>
        
        <section id="secNovaPessoa">
            <h2>Incluindo Nova Pessoa</h2>
            <form id="pessoaForm">
                <label>Nome completo:</label>
                <input type="text" id="nome" required>
                <label>Sexo:</label>
                <select id="sexo">
                    <option value="">Selecione...</option>
                    <option value="M">Masculino</option>
                    <option value="F">Feminino</option>
                </select>
                <label>Nascimento:</label>
                <input type="text" id="nascimento" placeholder="DD/MM/AAAA">
                <label>Falecimento (opcional):</label>
                <input type="text" id="falecimento">
                <label>Profiss√£o (opcional):</label>
                <input type="text" id="profissao">
                <label>Cidade/Pa√≠s principal (opcional):</label>
                <input type="text" id="cidade_pais">
                <button type="submit">Salvar Registro</button>
                <button type="button" id="btnCancelarInclusao">Cancelar</button>
            </form>
            <div id="registroAtualContainer">Nenhum registro criado nesta sess√£o.</div>
        </section>
        
        <section id="secGerenciar">
            <h2>Registros</h2>
            <label>Filtrar por Nome ou Sobrenome:</label>
            <input type="text" id="filtroNome">
            <div id="botoesAcaoGlobais">
                <button id="btnVisualizarSelecionado">üå≥ Visualizar √Årvore</button>
            </div>
            <div id="registrosLista"></div> </section>
        
        <section id="secVisualizarArvore">
            <h2 style="text-align: center;">√Årvore Geneal√≥gica - Visualiza√ß√£o</h2>
            <div class="form-group">
                <label for="inputPessoaCentral">Buscar e selecionar a pessoa central da √°rvore:</label>
                <input type="text" id="inputPessoaCentral" list="listaPessoas" class="form-control" placeholder="Digite um nome para buscar...">
                <datalist id="listaPessoas">
                    </datalist>
            </div>
            <button id="btnEditarNaArvore" style="display: none; margin-top: 10px; background-color: #ee9b00;">‚úèÔ∏è Editar Pessoa Central</button>
            <div id="arvoreContainer"></div>
        </section>
        
        <section id="secEditarPessoa">
            <h2>Editar Registro</h2>
            <form id="editarForm">
               <!--  <label>ID:</label>  -->
               <!-- <input type="text" id="edit-id" readonly>  -->
                <label>Nome completo:</label>
                <input type="text" id="edit-nome">
                <label>Sexo:</label>
                <select id="edit-sexo">
                    <option value="">Selecione...</option>
                    <option value="M">Masculino</option>
                    <option value="F">Feminino</option>
                </select>
                <label>Nascimento:</label>
                <input type="text" id="edit-nascimento">
                <label>Falecimento:</label>
                <input type="text" id="edit-falecimento">
                <label>Profiss√£o:</label>
                <input type="text" id="edit-profissao">
                <label>Cidade/Pa√≠s principal:</label>
                <input type="text" id="edit-cidade_pais">
                <button type="button" id="btnSalvarEdicao">Salvar Altera√ß√µes</button>
                <button type="button" id="btnExcluirRegistro">Excluir Registro</button>
                <button type="button" id="btnCancelarEditar">Cancelar</button>
            </form>
            <div id="vinculosSection" style="margin-top: 30px; padding-top: 30px; border-top: 1px solid #ddd;">
                <h3 id="labelNomePessoaEditada" class="vinculo-pessoa-nome">Editando Pessoa: [Nome]</h3>
                <h3>V√≠nculos Atuais:</h3>
                <div id="vinculosLista"></div>

<div class="vinculo-creator">
    <strong id="nomePessoaPrincipalVinculo" class="vinculo-pessoa-nome"></strong>
    <select id="selectRelacao">
        <option value="filho">√© filho(a) de</option>
        <option value="pai">√© pai/m√£e de</option>
        <option value="conjuge">√© c√¥njuge de</option>
    </select>
    <select id="selectPessoaVinculo">
        <option value="">Selecione uma pessoa...</option>
    </select>
    <button type="button" id="btnAdicionarVinculo">Salvar V√≠nculo</button>
</div>

            </div>
        </section>
        
        <footer>
            <button id="btnExportarJSON">Salvar LOCAL</button>
            <button id="btnImportarJSON">Carregar LOCAL</button>
            <button id="btnSalvarSupabase">‚òÅÔ∏è Salvar na Nuvem</button>
            <button id="btnCarregarSupabase">‚¨áÔ∏è Carregar da Nuvem</button>
            <button id="btnDicas" title="Ver Dicas de Uso">üí°</button>
            <input type="file" id="inputImportJSON" accept=".json,.txt" style="display: none;">
        </footer>
    </div>
<div id="dicasModal" class="modal">
    <div class="modal-content">
        <span class="close-button">&times;</span>
        <h3>Instru√ß√µes e Dicas</h3>
        <div class="dicas-nav">
            <button id="btnDicaAnterior" title="Dica anterior">&#9664;</button>
            <span id="dicaContador">0 / 0</span>
            <button id="btnDicaProxima" title="Pr√≥xima dica">&#9654;</button>
        </div>
        <div class="dica-content-wrapper">
            <p id="dicaTexto">Carregando dicas...</p>
        </div>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="arvore_script.js"></script>
</body>
</html>